# 概要

[ビッグデータ分析・活用のためのSQLレシピ](www.amazon.co.jp/dp/4839961263) のメモ

## 3. データ加工のための SQL

### 3-1 1つの値に対する操作

`mst_users` テーブルを作成する時に気になった事

- [DATETIMEとTIMESTAMPの違いや2038年問題などについて解説](https://style.potepan.com/articles/18812.html)

#### URL から要素を取り出す

`SUBSTRING_INDEX` を使ってやったけど、めちゃくちゃ手間。分析するなら `PostgreSQL` を聞いたことがあったけど理解した。
MySQL8 系ならまた違うのかもしれないけど、そしたら認証系で面倒だった覚えがある。


#### 欠損値をデフォルト値に置き換える

SQL では、`NULL` と計算すると結果は `NULL` になる。それだと分析時に不都合なので、`COALESCE` を使って **null の時は、この値として計算する**　ということを指定できる。

### 3-2 複数の値に対する操作

整数型の演算は整数になるので、パーセントを求める時など工夫をしないと 0 になる SQL エンジンがある(ex. PostgreSQL)。
`CAST` 関数を使うと良い。

#### 日付の計算
